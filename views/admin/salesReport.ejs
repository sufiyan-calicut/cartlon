<%-include('../admin/partials/admin-header.ejs') -%>
      <!-- partial -->
      <div class="container-fluid page-body-wrapper">
        <!-- partial:../../partials/_sidebar.html -->
        <%-include('../admin/partials/admin-sidebar.ejs') -%>
        <!-- start -->
        <div class="main-panel">
          <div class="content-wrapper">
            <div class="page-header">
              <h3 class="page-title"> Order Details </h3>
              <nav aria-label="breadcrumb">
                 
              </nav>
            </div>
            <div class="row">
             
              <div class="col-lg-12 grid-margin stretch-card">
                <div class="card">
                  <div class="card-body">
                    <h4 class="card-title"></h4>
                    <p class="card-description"> <code></code>
                        <button style="margin-bottom: 10px; padding: 13px;" class="btn btn-primary me-md-2" id="btnExport" >Download</button>
                    </p>
              <div style="overflow-x: auto; " >
                <table class="table table-hover" id="tableData" >
                  <thead>
                    <tr>
                      <th>Index</th>
                      <th>Customer Name</th>
                      <th>Address</th>
                      <th>Product Name</th>
                      <th>Ordered Date</th>
                      <th>Delivered Date</th>
                      <th>Total products</th>
                      <th>Total Amount</th>
                      <th>Payment Method</th>
                    </tr>
                  </thead>
                  <tbody>
                    <% sales.forEach(function(orders,index){%>
                    <tr>
                        <td><%=index+1 %></td>
                      <td><%=orders.address.name%></td>
                      <td><%=orders.address.address%></td>
                      <td><% orders.items.forEach((o)=>{%>
                        <%=o.productName  %> <br>
                        <% }) %> 
                      </td>
                      <td><%=orders.createdAt.toLocaleDateString()%></td>
                      <td><%=orders.updatedAt.toLocaleDateString()%></td>
                      <td><%=orders.totalProduct%></td>
                      <td><%=orders.totalAmount%></td>
                      <td><%=orders.paymentMethod%></td>
                      
                    </tr>
                    <%})%>
                    <thead>
                        <tr>
                            <th><br>
                                <code style="font-weight: bold;">TOTAL : <%= total  %> </code>
                                <br>
                            </th>
                        </tr>
                    </thead>
                    
                  </tbody>
                </table>
              </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
          <!-- content-wrapper ends -->
          <!-- partial:../../partials/_footer.html -->
          <footer class="footer">
            <div class="container-fluid d-flex justify-content-between">
              <span class="text-muted d-block text-center text-sm-start d-sm-inline-block">Copyright Â© CodersBench.com</span>
              <span class="float-none float-sm-end mt-1 mt-sm-0 text-end">  <a href="https://www.bootstrapdash.com/bootstrap-admin-template/" target="_blank"></a> </span>
            </div>
          </footer>
          <!-- partial -->
        </div>
        <!-- main-panel ends -->
      </div>
      <!-- page-body-wrapper ends -->
    </div>
    <!-- container-scroller -->
    <!-- plugins:js -->
    <script src="/admin-assets/vendors/js/vendor.bundle.base.js"></script>
    <!-- endinject -->
    <!-- Plugin js for this page -->
    <!-- End plugin js for this page -->
    <!-- inject:js -->
    <script src="/admin-assets/js/off-canvas.js"></script>
    <script src="/admin-assets/js/hoverable-collapse.js"></script>
    <script src="/admin-assets/js/misc.js"></script>
    <!-- endinject -->
    <!-- Custom js for this page -->
    <!-- End custom js for this page -->

</script>


<script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/pdfmake/0.1.22/pdfmake.min.js"></script>
<script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/0.4.1/html2canvas.min.js"></script>
<script type="text/javascript">
  $("body").on("click", "#btnExport", function () {
      html2canvas($('#tableData')[0], {
          onrendered: function (canvas) {
              var data = canvas.toDataURL();
              var docDefinition = {
                  content: [{
                      image: data,
                      width: 500
                  }]
              };
              pdfMake.createPdf(docDefinition).download("invoice.pdf");
          }
      });
  });
</script>
  </body>
</html>